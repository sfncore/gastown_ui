<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
		<meta name="theme-color" content="#0a0a0b" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta
			http-equiv="Content-Security-Policy"
			content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; connect-src 'self' wss:; img-src 'self' data:; font-src 'self' https://fonts.gstatic.com"
		/>
		<!-- Gas Town Typography: Space Grotesk (display), Inter (body), JetBrains Mono (code) -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
		<link rel="icon" href="%sveltekit.assets%/favicon.ico" sizes="16x16 32x48" />
		<link rel="apple-touch-icon" href="%sveltekit.assets%/apple-touch-icon.png" />
		<link rel="manifest" href="%sveltekit.assets%/manifest.json" />
		%sveltekit.head%
		<!-- Flash prevention: Apply theme before first paint -->
		<script>
			(function() {
				try {
					var stored = localStorage.getItem('gastown-theme');
					// Validate stored value is one of allowed themes
					var theme = (stored === 'light' || stored === 'dark' || stored === 'system') ? stored : 'system';
					var effectiveTheme;
					if (theme === 'system') {
						effectiveTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
					} else {
						effectiveTheme = theme;
					}
					// Only add validated class names
					document.documentElement.classList.add(effectiveTheme);
				} catch (e) {
					// Fallback to dark theme if localStorage unavailable
					document.documentElement.classList.add('dark');
				}
			})();
		</script>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">%sveltekit.body%</div>
	</body>
</html>
